"""
Script simple para verificar qu√© est√° pasando con las ventas
"""
print("\n" + "="*80)
print("üîç INSTRUCCIONES PARA DIAGNOSTICAR EL PROBLEMA DE VENTAS")
print("="*80 + "\n")

print("PASO 1: Verifica que el webhook est√© configurado")
print("-" * 80)
print("El webhook de Mercado Pago debe apuntar a:")
print("   https://prouniversity-exculpatory-latosha.ngrok-free.dev/api/checkout/webhook")
print()
print("Para verificar:")
print("   1. Ve a https://www.mercadopago.com.ar/developers")
print("   2. Entra a tu aplicaci√≥n")
print("   3. Ve a 'Webhooks'")
print("   4. Verifica que la URL sea correcta")
print()

print("PASO 2: Realiza una compra de prueba")
print("-" * 80)
print("   1. Agrega un producto al carrito")
print("   2. Ve al checkout")
print("   3. Completa los datos de env√≠o")
print("   4. Haz clic en 'REALIZAR PEDIDO'")
print("   5. Se abrir√° una ventana emergente con Mercado Pago")
print("   6. Usa una tarjeta de prueba:")
print("      ‚Ä¢ N√∫mero: 4509 9535 6623 3704")
print("      ‚Ä¢ CVV: 123")
print("      ‚Ä¢ Vencimiento: 11/25")
print("   7. Completa el pago")
print()

print("PASO 3: Revisa los logs del backend")
print("-" * 80)
print("Despu√©s de completar el pago, busca en los logs del Docker:")
print()
print("Deber√≠as ver estos mensajes:")
print("   üîî Webhook recibido de Mercado Pago")
print("   üí≥ Procesando pago con ID: XXXX")
print("   üìã Informaci√≥n del pago obtenida de MP. Estado: approved")
print("   ‚úÖ Pago aprobado, creando orden...")
print("   üíæ Guardando orden en la base de datos...")
print("   üîÑ Haciendo commit de la transacci√≥n...")
print("   ‚úÖ Orden guardada exitosamente para el pago XXXX")
print()
print("Si NO ves estos mensajes:")
print("   ‚ùå El webhook NO se est√° ejecutando")
print("   ‚ùå Verifica la configuraci√≥n en Mercado Pago")
print()

print("PASO 4: Si ves los mensajes, verifica el panel de admin")
print("-" * 80)
print("   1. Ve a http://localhost:5173/admin")
print("   2. Inicia sesi√≥n con tu usuario admin")
print("   3. Ve a la secci√≥n de 'Ventas'")
print("   4. Deber√≠as ver la orden reci√©n creada")
print()

print("PASO 5: Si NO aparece en el admin pero S√ç ves los logs")
print("-" * 80)
print("Entonces el problema est√° en el frontend o el endpoint GET")
print("   1. Abre la consola del navegador (F12)")
print("   2. Ve a la pesta√±a 'Network'")
print("   3. Busca la petici√≥n a '/api/admin/sales'")
print("   4. Verifica si hay errores")
print()

print("="*80)
print("\nüí° DATO IMPORTANTE:")
print("El webhook de Mercado Pago SOLO se ejecuta cuando:")
print("   - El pago fue aprobado")
print("   - Mercado Pago puede acceder a tu servidor (por eso usas ngrok)")
print("   - La URL del webhook est√° correctamente configurada")
print()
print("Si est√°s en desarrollo local, DEBES usar ngrok")
print("="*80 + "\n")
